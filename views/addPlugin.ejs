<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="description" content="Add a plugin to bStats.">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>bStats - Add plugin</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="/stylesheets/tailwind.css" rel="stylesheet" media="screen"/>
    <link href="/stylesheets/style.css" rel="stylesheet" media="screen"/>
</head>
<body class="bg-slate-950 text-slate-100 antialiased">

<% include templates/navigation.ejs %>

<main>
    <section class="relative isolate overflow-hidden">
        <div class="absolute inset-0 -z-20 bg-slate-950"></div>
        <div class="absolute inset-0 -z-10 hero-noise opacity-30"></div>
        <div class="mx-auto max-w-3xl px-6 py-24 sm:py-28">
            <header class="space-y-6 text-center">
                <span class="inline-flex items-center gap-2 rounded-md border border-white/20 bg-white/5 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.3em] text-white/70">Add plugin</span>
                <h1 class="text-4xl font-semibold text-white sm:text-5xl">Register your plugin with bStats</h1>
                <p class="text-sm leading-6 text-slate-300">We just need to know which server software you target and what the plugin is called. You’ll get your plugin ID right after submitting.</p>
            </header>

            <% if (failed) { %>
            <div class="mt-8 rounded-2xl border border-rose-500/40 bg-rose-500/10 p-4 text-sm text-rose-100">Something went wrong on our side. Please try again or ping us on Discord if the problem persists.</div>
            <% } else if (alreadyAdded) { %>
            <div class="mt-8 rounded-2xl border border-amber-500/40 bg-amber-500/10 p-4 text-sm text-amber-100">Looks like this plugin is already registered.</div>
            <% } else if (wrongCaptcha) { %>
            <div class="mt-8 rounded-2xl border border-amber-500/40 bg-amber-500/10 p-4 text-sm text-amber-100">Please solve the captcha before submitting.</div>
            <% } %>

            <form method="post" class="mt-10 space-y-6 rounded-3xl border border-white/10 bg-slate-900/75 p-8 shadow-2xl shadow-slate-950/60 backdrop-blur">
                <div class="space-y-3">
                    <label for="software" class="block text-sm font-medium text-slate-200">Server software</label>
                    <select id="software" name="software" required class="input-shell focus-accent w-full text-sm">
                        <option value="" disabled selected>Select server software</option>
                        <% for (var i = 0; i < allSoftware.length; i++) { %>
                        <% if (allSoftware[i].globalPlugin || (user != null && user.admin)) { %>
                        <option value="<%= allSoftware[i].id %>"><%= allSoftware[i].name %></option>
                        <% } %>
                        <% } %>
                    </select>
                    <p class="text-xs text-slate-400">Only platforms with global dashboards appear here by default. Admins can add hidden ones too.</p>
                </div>

                <div class="space-y-3">
                    <label for="pluginName" class="block text-sm font-medium text-slate-200">Plugin name</label>
                    <input id="pluginName" name="pluginName" type="text" maxlength="32" pattern="^[-_a-zA-Z0-9]+(\s[-_a-zA-Z0-9]+)*$" required class="input-shell focus-accent w-full text-sm" placeholder="AwesomePlugin" />
                    <p class="text-xs text-slate-400">Letters, numbers, spaces, dashes and underscores are fine.</p>
                </div>

                <button type="submit" name="btn_add_plugin" class="accent-bg w-full rounded-full px-6 py-3 text-sm font-semibold shadow-lg shadow-slate-950/40 transition hover:shadow-xl">Add plugin</button>
            </form>

            <p class="mt-6 text-center text-xs text-slate-400">After registering, you’ll get the plugin ID you need for the Metrics class. Need help? <a href="/getting-started" class="accent-text hover:opacity-80">Read the getting started guide</a>.</p>
        </div>
    </section>
</main>

<% include templates/footer.ejs %>
<% include templates/globalScripts.ejs %>

</body>
</html>
