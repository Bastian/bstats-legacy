<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="description" content="A description on how to include bStats to your plugin">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <title>bStats - Include metrics</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/stylesheets/main.css" />
</head>
<body>

<% include ../templates/navigation.ejs %>
<main class="pb-24">
    <section class="doc-hero">
        <div class="doc-container py-16 sm:py-20">
            <div class="flex flex-col gap-6 sm:flex-row sm:items-end sm:justify-between">
                <div class="max-w-2xl space-y-4">
                    <span class="badge bg-brand-100 text-brand-700">Documentation</span>
                    <h1 class="font-display text-4xl font-semibold tracking-tight text-slate-900 sm:text-5xl">Include metrics</h1>
                    <p class="text-base leading-relaxed text-slate-600">
                        Choose your favourite workflow: take the Maven route for a maintained dependency, or drop-in the Metrics class.
                        Both paths end with live data in your dashboard.
                    </p>
                </div>
                <a href="/getting-started" class="btn-primary w-full justify-center px-5 py-3 text-sm sm:w-auto">
                    Back to getting started
                </a>
            </div>
        </div>
    </section>

    <section class="doc-container mt-12 space-y-12">
        <% if (addedPlugin) { %>
        <div class="space-y-4">
            <div class="doc-callout doc-callout-info">
                <p class="text-sm font-semibold">Plugin added successfully</p>
                <p class="mt-2">
                    <span class="font-semibold text-slate-800"><%= pluginName %></span> is registered as plugin ID
                    <span class="font-semibold text-slate-800"><%= pluginId %></span>.
                    Keep this handy—you’ll need it inside your metrics initialization.
                </p>
            </div>
            <div class="doc-callout doc-callout-note">
                <p class="text-sm">
                    Need a refresher later? You can always revisit the
                    <a class="font-semibold text-brand-600 hover:text-brand-700" href="/what-is-my-plugin-id">What is my plugin ID?</a>
                    page for every ID tied to your account.
                </p>
            </div>
        </div>
        <% } %>

        <div class="grid gap-8 lg:grid-cols-[260px_1fr]">
            <aside class="space-y-4 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm">
                <h2 class="text-xs uppercase tracking-[0.3em] text-slate-400">On this page</h2>
                <nav class="mt-4 space-y-2 text-sm text-slate-600">
                    <a class="block rounded-lg px-3 py-2 transition hover:bg-slate-100 hover:text-slate-900" href="#maven">Shade via Maven</a>
                    <a class="block rounded-lg px-3 py-2 transition hover:bg-slate-100 hover:text-slate-900" href="#manual">Manual copy</a>
                    <a class="block rounded-lg px-3 py-2 transition hover:bg-slate-100 hover:text-slate-900" href="#integration">Wire it up</a>
                </nav>
            </aside>

            <div class="space-y-10">
                <article id="maven" class="doc-card space-y-6">
                    <div class="space-y-3">
                        <span class="text-xs uppercase tracking-[0.3em] text-slate-400">Option 1</span>
                        <h2 class="doc-card-title">Shade bStats using Maven</h2>
                        <p class="text-sm leading-relaxed text-slate-600">
                            This is the most future-proof way to include bStats. Maven keeps the dependency updated,
                            and shading ensures your plugin ships a self-contained Metrics class.
                        </p>
                    </div>

                    <details class="group rounded-2xl border border-slate-200 bg-slate-50 p-4 sm:p-6">
                        <summary class="flex cursor-pointer items-center justify-between text-sm font-semibold text-slate-700">
                            <span>Step 1 · Add the dependency</span>
                            <span class="text-xs uppercase tracking-[0.2em] text-slate-400">Click to toggle</span>
                        </summary>
                        <div class="mt-4 space-y-4 text-sm text-slate-600">
                            <p>
                                Choose the artifact that matches your server platform. Recent versions are published to Maven Central.
                            </p>
                            <pre class="doc-code language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.bstats&lt;/groupId&gt;
  &lt;artifactId&gt;bstats-bukkit&lt;/artifactId&gt;
  &lt;version&gt;3.0.2&lt;/version&gt;
  &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;</pre>
                            <p class="text-xs uppercase tracking-[0.2em] text-slate-400">Artifacts available</p>
                            <ul class="list-disc space-y-1 pl-6 text-sm">
                                <li><code class="font-mono text-slate-700">bstats-bukkit</code></li>
                                <li><code class="font-mono text-slate-700">bstats-bungeecord</code></li>
                                <li><code class="font-mono text-slate-700">bstats-sponge</code></li>
                                <li><code class="font-mono text-slate-700">bstats-velocity</code></li>
                            </ul>
                        </div>
                    </details>

                    <details class="group rounded-2xl border border-slate-200 bg-slate-50 p-4 sm:p-6">
                        <summary class="flex cursor-pointer items-center justify-between text-sm font-semibold text-slate-700">
                            <span>Step 2 · Shade the dependency</span>
                            <span class="text-xs uppercase tracking-[0.2em] text-slate-400">Click to toggle</span>
                        </summary>
                        <div class="mt-4 space-y-4 text-sm text-slate-600">
                            <div class="doc-callout doc-callout-note">
                                <p class="text-sm font-semibold text-amber-700">Don’t skip this!</p>
                                <p class="mt-1 text-sm text-amber-700">
                                    Shading bundles the Metrics class into your jar. If you use Sponge, skip the relocation section.
                                </p>
                            </div>
                            <pre class="doc-code language-xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
      &lt;version&gt;3.1.0&lt;/version&gt;
      &lt;configuration&gt;
        &lt;relocations&gt;
          &lt;relocation&gt;
            &lt;pattern&gt;org.bstats&lt;/pattern&gt;
            &lt;shadedPattern&gt;your.package&lt;/shadedPattern&gt;
          &lt;/relocation&gt;
        &lt;/relocations&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;phase&gt;package&lt;/phase&gt;
          &lt;goals&gt;
            &lt;goal&gt;shade&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</pre>
                        </div>
                    </details>

                    <div class="space-y-4 text-sm text-slate-600">
                        <p class="text-xs uppercase tracking-[0.2em] text-slate-400">Sample <code class="font-mono text-slate-600">pom.xml</code></p>
                        <pre class="doc-code language-xml">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;me.name&lt;/groupId&gt;
  &lt;artifactId&gt;pluginname&lt;/artifactId&gt;
  &lt;version&gt;1.0.0&lt;/version&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.bstats&lt;/groupId&gt;
      &lt;artifactId&gt;bstats-bukkit&lt;/artifactId&gt;
      &lt;version&gt;3.0.2&lt;/version&gt;
      &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.1.0&lt;/version&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
&lt;/project&gt;</pre>
                    </div>
                </article>

                <article id="manual" class="doc-card space-y-6">
                    <div class="space-y-3">
                        <span class="text-xs uppercase tracking-[0.3em] text-slate-400">Option 2</span>
                        <h2 class="doc-card-title">Manually bundle the Metrics class</h2>
                        <p class="text-sm leading-relaxed text-slate-600">
                            Prefer to copy files by hand? Download the Metrics class that matches your platform and drop it into your project.
                            Remember to change the package name to something inside your namespace.
                        </p>
                    </div>

                    <div class="overflow-hidden rounded-2xl border border-slate-200 bg-slate-50">
                        <table class="min-w-full divide-y divide-slate-200 text-sm">
                            <thead class="bg-slate-100 text-slate-500">
                            <tr>
                                <th class="px-4 py-3 text-left font-semibold uppercase tracking-[0.18em]">Software</th>
                                <th class="px-4 py-3 text-left font-semibold uppercase tracking-[0.18em]">Download</th>
                            </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-200 bg-white text-slate-600">
                            <% for (var i = 0; i < software.length; i++) { %>
                            <% if (software[i].metricsClass !== null) { %>
                            <tr>
                                <td class="px-4 py-3 font-semibold text-slate-800"><%= software[i].name %></td>
                                <td class="px-4 py-3">
                                    <a class="font-semibold text-brand-600 hover:text-brand-700" href="<%= software[i].metricsClass %>" target="_blank" rel="noopener">
                                        Metrics.java
                                    </a>
                                </td>
                            </tr>
                            <% } %>
                            <% } %>
                            </tbody>
                        </table>
                    </div>
                    <p class="text-sm leading-relaxed text-slate-600">
                        Each class is hosted on GitHub. Use the raw file, replace the <code class="font-mono text-slate-700">org.bstats</code> package name,
                        and keep the file in sync with future releases.
                    </p>
                </article>

                <article id="integration" class="doc-card space-y-6">
                    <div class="space-y-3">
                        <span class="text-xs uppercase tracking-[0.3em] text-slate-400">Finish up</span>
                        <h2 class="doc-card-title">Create the Metrics instance</h2>
                        <p class="text-sm leading-relaxed text-slate-600">
                            With the class in place, you just need to instantiate Metrics in your plugin. Each platform has a slightly different entry point—use the example that matches your software.
                        </p>
                    </div>

                    <div class="space-y-6">
                        <div>
                            <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-400">Bukkit / Spigot</h3>
                            <pre class="doc-code language-java">public class ExamplePlugin extends JavaPlugin {
    @Override
    public void onEnable() {
        int pluginId = <%= pluginId || '12345' %>; // Replace with your actual plugin id
        Metrics metrics = new Metrics(this, pluginId);
        metrics.addCustomChart(new Metrics.SimplePie("chart_id", () -&gt; getConfig().getString("some-setting")));
    }
}</pre>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-400">BungeeCord</h3>
                            <pre class="doc-code language-java">public final class ExampleBungee extends Plugin {
    @Override
    public void onEnable() {
        int pluginId = <%= pluginId || '12345' %>;
        Metrics metrics = new Metrics(this, pluginId);
        metrics.addCustomChart(new Metrics.SimpleBarChart("proxy_modes", () -&gt; {
            Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
            map.put(getProxy().getConfig().isOnlineMode() ? "Online" : "Offline", 1);
            return map;
        }));
    }
}</pre>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-400">Sponge</h3>
                            <pre class="doc-code language-java">@Plugin(id = "example", name = "Example", version = "1.0")
public class ExampleSponge {
    @Inject private PluginContainer container;

    @Listener
    public void onServerStart(GameStartedServerEvent event) {
        int pluginId = <%= pluginId || '12345' %>;
        Metrics metrics = new Metrics(container, pluginId);
        metrics.addCustomChart(new Metrics.AdvancedPie("worlds", () -&gt; {
            Map&lt;String, Integer&gt; data = new HashMap&lt;&gt;();
            Sponge.server().worldManager().worlds().forEach(world -&gt; data.put(world.key().asString(), 1));
            return data;
        }));
    }
}</pre>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-400">Velocity</h3>
                            <pre class="doc-code language-java">@Plugin(id = "example", name = "Example", version = "1.0")
public class ExampleVelocity {
    @Inject
    public ExampleVelocity(ProxyServer server, Metrics.Factory metricsFactory) {
        int pluginId = <%= pluginId || '12345' %>;
        Metrics metrics = metricsFactory.make(this, pluginId);
        metrics.addCustomChart(new Metrics.SimplePie("proxy_version", () -&gt; server.getVersion().getName()));
    }
}</pre>
                        </div>
                    </div>

                    <div class="doc-callout doc-callout-info">
                        <p class="text-sm font-semibold">Ready to see data flow?</p>
                        <p class="mt-2">Deploy your plugin, wait for the next stats cycle (about 30 minutes), and you’ll spot the numbers on your plugin page.</p>
                    </div>
                </article>
            </div>
        </div>
    </section>
</main>

<% include ../templates/footer.ejs %>

<% include ../templates/globalScripts.ejs %>

</body>
</html>
