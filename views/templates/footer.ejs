<footer class="bg-slate-950/98 text-slate-300">
    <div class="mx-auto max-w-7xl px-6 pt-16 sm:px-8">
        <div class="grid gap-12 border-b border-white/10 pb-16 md:grid-cols-2 lg:grid-cols-[2fr,1fr,1fr]">
            <div>
                <div class="flex items-center gap-3 text-white">
                    <span class="inline-flex h-10 w-10 items-center justify-center rounded-xl border border-white/10 bg-white/10 text-sm font-semibold uppercase">bS</span>
                    <span class="text-lg font-semibold tracking-tight">bStats</span>
                </div>
                <p class="mt-6 max-w-lg text-sm leading-6 text-slate-400">bStats is the open analytics platform for Minecraft plugin developers. Collect adoption metrics securely, understand your player community and tell the story of your plugin with confidence.</p>
                <div class="mt-6 flex flex-wrap items-center gap-3">
                    <a href="https://discord.gg/qTXtXuf" class="accent-bg inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-semibold shadow-sm transition hover:shadow-lg" target="_blank" rel="noopener">
                        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M20.317 4.369A19.791 19.791 0 0 0 15.89 3a13.55 13.55 0 0 0-.67 1.37 18.626 18.626 0 0 0-5.44 0A12.72 12.72 0 0 0 9.11 3a19.736 19.736 0 0 0-4.43 1.379A20.548 20.548 0 0 0 .964 18.495a19.912 19.912 0 0 0 6.082 3.083 14.978 14.978 0 0 0 1.287-2.084 12.876 12.876 0 0 1-2.042-.979c.17-.122.336-.247.497-.378A13.125 13.125 0 0 0 8.7 19.6a12.949 12.949 0 0 0 6.594 0c.65.45 1.34.84 2.065 1.166.161.131.328.256.498.378-.653.314-1.329.583-2.02.804.36.72.78 1.407 1.256 2.054a19.897 19.897 0 0 0 6.109-3.041A20.546 20.546 0 0 0 20.317 4.37Z"></path>
                        </svg>
                        Join our Discord
                    </a>
                    <button type="button" data-color-picker-open class="inline-flex items-center gap-2 rounded-full border border-white/15 px-4 py-2 text-sm font-semibold text-white/80 transition hover:border-white/35 hover:text-white">
                        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6" d="M12 7.5V3m0 4.5a4.5 4.5 0 0 1 4.5 4.5M12 7.5a4.5 4.5 0 0 0-4.5 4.5M12 16.5V21m0-4.5a4.5 4.5 0 0 1-4.5-4.5m4.5 4.5a4.5 4.5 0 0 0 4.5-4.5M7.5 12H3m4.5 0a4.5 4.5 0 0 1 4.5-4.5m-4.5 4.5a4.5 4.5 0 0 0 4.5 4.5M21 12h-4.5"></path>
                        </svg>
                        Personalize accent
                    </button>
                </div>
                <div class="mt-6 flex flex-wrap items-center gap-6 text-xs uppercase tracking-wide text-slate-500">
                    <span class="flex items-center gap-2">
                        <span class="h-2.5 w-2.5 rounded-full bg-emerald-400"></span>
                        Open source &amp; privacy first
                    </span>
                    <a href="https://github.com/Bastian/bStats" class="inline-flex items-center gap-2 text-slate-400 transition hover:text-white" target="_blank" rel="noopener">
                        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12 2C6.48 2 2 6.58 2 12.17c0 4.47 2.87 8.26 6.85 9.6.5.1.68-.22.68-.48 0-.24-.01-.87-.01-1.7-2.78.62-3.37-1.37-3.37-1.37-.46-1.18-1.12-1.5-1.12-1.5-.92-.64.07-.63.07-.63 1.01.07 1.54 1.06 1.54 1.06.9 1.58 2.36 1.12 2.94.86.09-.67.35-1.12.63-1.38-2.22-.26-4.56-1.14-4.56-5.05 0-1.12.39-2.04 1.03-2.76-.1-.26-.45-1.3.1-2.71 0 0 .84-.27 2.75 1.05a9.2 9.2 0 0 1 5 0c1.9-1.32 2.74-1.05 2.74-1.05.56 1.41.21 2.45.1 2.71.64.72 1.02 1.64 1.02 2.76 0 3.92-2.34 4.79-4.57 5.05.36.32.68.95.68 1.93 0 1.39-.01 2.5-.01 2.83 0 .27.18.59.69.48A10.2 10.2 0 0 0 22 12.17C22 6.58 17.52 2 12 2z" clip-rule="evenodd"></path>
                        </svg>
                        GitHub
                    </a>
                </div>
            </div>
            <div>
                <h3 class="text-sm font-semibold text-white">Learn</h3>
                <ul class="mt-4 space-y-3 text-sm text-slate-400">
                    <li><a href="/getting-started" class="transition hover:text-white">Getting started</a></li>
                    <li><a href="/include-metrics" class="transition hover:text-white">Integrate bStats</a></li>
                    <li><a href="/help/custom-charts" class="transition hover:text-white">Custom charts</a></li>
                    <li><a href="/help/rest-api" class="transition hover:text-white">REST API reference</a></li>
                    <li><a href="/faq" class="transition hover:text-white">FAQ</a></li>
                </ul>
            </div>
            <div>
                <h3 class="text-sm font-semibold text-white">Legal</h3>
                <ul class="mt-4 space-y-3 text-sm text-slate-400">
                    <li><a href="/terms-of-use" class="transition hover:text-white">Terms of use</a></li>
                    <li><a href="/privacy-policy" class="transition hover:text-white">Privacy policy</a></li>
                    <li><a href="/imprint" class="transition hover:text-white">Imprint</a></li>
                </ul>
                <div class="mt-6 rounded-2xl border border-white/10 bg-white/5 p-4 text-xs leading-5 text-slate-400">
                    <div class="text-sm font-semibold text-white">Supported by GameHosting</div>
                    <p class="mt-2">Massive thanks to <a href="https://www.gamehosting.it/" class="accent-text transition hover:opacity-80" target="_blank" rel="noopener">GameHosting</a> for powering our infrastructure around the globe.</p>
                </div>
            </div>
        </div>
        <div class="flex flex-col gap-4 py-8 text-sm text-slate-500 sm:flex-row sm:items-center sm:justify-between">
            <p>&copy; <%= new Date().getFullYear() %> bStats. Crafted for plugin developers by the community.</p>
            <div class="flex flex-wrap items-center gap-3 text-xs uppercase tracking-wide">
                <a href="/submit-data" class="transition hover:text-white/80">Submit data</a>
                <span class="h-1 w-1 rounded-full bg-white/20"></span>
                <a href="/help/custom-charts" class="transition hover:text-white/80">Custom charts</a>
                <span class="h-1 w-1 rounded-full bg-white/20"></span>
                <a href="/what-is-my-plugin-id" class="transition hover:text-white/80">Find plugin ID</a>
            </div>
        </div>
    </div>
</footer>

<div id="color-picker" class="pointer-events-none fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-slate-950/80 backdrop-blur-sm" data-color-picker-overlay></div>
    <div class="relative mx-auto mt-24 w-full max-w-3xl scale-95 rounded-3xl border border-white/10 bg-slate-900/95 p-8 text-slate-100 shadow-2xl transition duration-200 ease-out">
        <div class="flex flex-wrap items-start justify-between gap-4">
            <div>
                <div class="text-xs font-semibold uppercase tracking-[0.35em] text-white/60">Personalize</div>
                <h2 class="mt-3 text-2xl font-semibold text-white">Pick an accent color</h2>
                <p class="mt-2 max-w-xl text-sm leading-6 text-slate-400">Choose your favorite shade to tint buttons, highlights and dashboards across bStats. Changes apply instantly and are stored for a year.</p>
            </div>
            <button type="button" data-color-picker-close class="inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/10 text-slate-300 transition hover:border-white/25 hover:text-white">
                <span class="sr-only">Close color picker</span>
                <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M5.22 5.22a.75.75 0 0 1 1.06 0L10 8.94l3.72-3.72a.75.75 0 1 1 1.06 1.06L11.06 10l3.72 3.72a.75.75 0 0 1-1.06 1.06L10 11.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06L8.94 10 5.22 6.28a.75.75 0 0 1 0-1.06z" clip-rule="evenodd"></path>
                </svg>
            </button>
        </div>
        <div class="mt-8 grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
            <% var accentOptions = [
                { slug: 'teal', label: 'Teal' },
                { slug: 'blue', label: 'Blue' },
                { slug: 'indigo', label: 'Indigo' },
                { slug: 'purple', label: 'Purple' },
                { slug: 'deep-purple', label: 'Deep Purple' },
                { slug: 'pink', label: 'Pink' },
                { slug: 'red', label: 'Red' },
                { slug: 'orange', label: 'Orange' },
                { slug: 'deep-orange', label: 'Deep Orange' },
                { slug: 'amber', label: 'Amber' },
                { slug: 'yellow', label: 'Yellow' },
                { slug: 'lime', label: 'Lime' },
                { slug: 'light-green', label: 'Light Green' },
                { slug: 'green', label: 'Green' },
                { slug: 'cyan', label: 'Cyan' },
                { slug: 'light-blue', label: 'Light Blue' },
                { slug: 'blue-grey', label: 'Blue Grey' },
                { slug: 'grey', label: 'Grey' },
                { slug: 'brown', label: 'Brown' },
                { slug: 'black', label: 'Black' }
            ]; %>
            <% for (var i = 0; i < accentOptions.length; i++) { %>
            <button type="button" class="color-option group flex items-center gap-4 rounded-2xl border border-white/10 bg-white/5 p-4 text-left transition hover:border-white/25" data-color-option="<%= accentOptions[i].slug %>">
                <span class="color-option__swatch inline-flex h-12 w-12 items-center justify-center rounded-xl border border-white/10 bg-white/10" data-color-swatch></span>
                <div>
                    <div class="text-sm font-semibold text-white"><%= accentOptions[i].label %></div>
                    <div class="text-xs text-slate-400">Instant preview applied site-wide</div>
                </div>
            </button>
            <% } %>
        </div>
        <div class="mt-8 flex flex-wrap items-center justify-between gap-4">
            <button type="button" data-color-randomize class="inline-flex items-center gap-2 rounded-full border border-white/15 px-4 py-2 text-sm font-semibold text-white/80 transition hover:border-white/35 hover:text-white">
                <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path d="M2.5 10a7.5 7.5 0 0 1 13.3-4.6L17 4.7a.75.75 0 0 1 1.28.53v4.5a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.53-1.28l1.49-1.49A5 5 0 1 0 3.5 10a.75.75 0 0 1-1.5 0z"></path>
                </svg>
                Surprise me
            </button>
            <p class="text-xs text-slate-500">Your selection is saved in a cookie for 12 months.</p>
        </div>
    </div>
</div>

<script>
(function() {
    var modal = document.getElementById('color-picker');
    if (!modal) {
        return;
    }

    var accentPalette = window.__bstatsAccentPalette || {};
    var openButtons = document.querySelectorAll('[data-color-picker-open]');
    var overlay = modal.querySelector('[data-color-picker-overlay]');
    var closeButton = modal.querySelector('[data-color-picker-close]');
    var colorButtons = modal.querySelectorAll('[data-color-option]');
    var randomButton = modal.querySelector('[data-color-randomize]');
    var activeColor = window.__bstatsAccent || 'teal';

    function toggleBodyScroll(disable) {
        if (!document.body) {
            return;
        }
        document.body.classList.toggle('overflow-hidden', disable);
    }

    function openModal() {
        modal.classList.remove('hidden');
        modal.classList.remove('pointer-events-none');
        requestAnimationFrame(function() {
            modal.classList.add('is-visible');
        });
        toggleBodyScroll(true);
    }

    function closeModal() {
        modal.classList.remove('is-visible');
        toggleBodyScroll(false);
        setTimeout(function() {
            modal.classList.add('hidden');
            modal.classList.add('pointer-events-none');
        }, 180);
    }

    function setCookie(name, value, days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        var expires = 'expires=' + date.toUTCString();
        document.cookie = name + '=' + value + ';' + expires + ';path=/';
    }

    function applyColor(color) {
        if (!color) {
            return;
        }
        setCookie('custom-color1', color, 365);
        window.location.reload();
    }

    openButtons.forEach(function(button) {
        button.addEventListener('click', openModal);
    });

    [overlay, closeButton].forEach(function(element) {
        if (element) {
            element.addEventListener('click', closeModal);
        }
    });

    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && modal.classList.contains('is-visible')) {
            closeModal();
        }
    });

    colorButtons.forEach(function(button) {
        var key = button.getAttribute('data-color-option');
        var swatch = button.querySelector('[data-color-swatch]');
        var palette = accentPalette[key];
        if (palette && swatch) {
            swatch.style.background = palette.base;
            swatch.style.boxShadow = '0 0 0 2px ' + palette.dark + ' inset';
        }
        button.addEventListener('click', function() {
            applyColor(key);
        });
        if (key === activeColor) {
            button.classList.add('color-option--active');
        }
    });

    if (randomButton) {
        randomButton.addEventListener('click', function() {
            var keys = Object.keys(accentPalette);
            if (!keys.length) {
                return;
            }
            var randomKey = keys[Math.floor(Math.random() * keys.length)];
            applyColor(randomKey);
        });
    }

    window.randomizeColor = function() {
        if (!accentPalette || !Object.keys(accentPalette).length) {
            return;
        }
        var keys = Object.keys(accentPalette);
        applyColor(keys[Math.floor(Math.random() * keys.length)]);
    };
    window.setColor = applyColor;
})();
</script>
